{% extends 'base.html.twig' %}
{% set counter = 0 %}

{% block body %}
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Statyczna próba rozciągania</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Wyniki obliczeń
                </div>
                <div class="panel-body">
                    <div class="col-lg-6">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <table>
                                    <tbody >
                                    {#<tr>#}
                                        {#<th style="padding:5px">Id</th>#}
                                        {#<td style="padding:5px">Id =  {{ zwick.id }}</td>#}
                                    {#</tr>#}
                                    <tr>
                                        <th style="padding:5px">Średnica próbki: </th>
                                        <td style="padding:5px">d<sub>0</sub> = {{ zwick.d0 }} mm</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Długość próbki: </th>
                                        <td style="padding:5px">h<sub>0</sub> = {{ zwick.h0 }} mm</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Temperatura próby: </th>
                                        <td style="padding:5px">t<sub>0</sub> = {{ zwick.t0 }} &degC</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Prędkość próby: </th>
                                        <td style="padding:5px">v<sub>0</sub> = {{ zwick.v0 }} mm/min</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Ag: </th>
                                        <td style="padding:5px">A<sub>g</sub> = {{ zwick.ag }} %</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Agt: </th>
                                        <td style="padding:5px">A<sub>gt</sub> = {{ zwick.agt }} %</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Moduł Younga: </th>
                                        <td style="padding:5px">E = {{ zwick.e }} GPa</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Granica plastyczności: </th>
                                        <td style="padding:5px">R<sub>p0.2</sub> = {{ zwick.r }} MPa</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Granica wytrzymałości: </th>
                                        <td style="padding:5px">F<sub>m</sub> = {{ zwick.fm }} kN</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Granica wytrzymałości: </th>
                                        <td style="padding:5px">R<sub>m</sub> = {{ zwick.rm }} MPa</td>
                                    </tr>
                                    <tr>
                                        <th style="padding:5px">Naprężenie przy zerwanu: </th>
                                        <td style="padding:5px">A<sub>10</sub> = {{ zwick.rb }} MPa</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover">
                                        <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Czas badania</th>
                                            <th>Droga standardowa</th>
                                            <th>Siła standardowa</th>
                                            <th>S - pole przekroju poprzecznego</th>
                                            <th>S<sub>exp</sub></th>
                                            <th>&epsilon - odkształcenie</th>
                                        </tr>
                                        <tr>
                                            <th></th>
                                            <th></th>
                                            <th>[mm]</th>
                                            <th>[N]</th>
                                            <th>[mm <sup>2</sup>]</th>
                                            <th>[N / mm<sup>2</sup>]</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for row in zwick_data %}
                                            {% set counter = counter + 1 %}
                                            <tr>
                                                <td>{{ counter }}</td>
                                                <td>{{ row.tavg }}</td>
                                                <td>{{ row.distancestandard }}</td>
                                                <td>{{ row.loadmeasurement }}</td>
                                                <td>{{ row.s }}</td>
                                                <td>{{ row.sexp }}</td>
                                                <td>{{ row.eps }}</td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Wykres zależności P = P(l) dla zmierzonych wartości
                </div>
                <div class="panel-body">
                    <div class="flot-chart">
                        <div class="flot-chart-content" id="flot-line-chart"></div>
                    </div>

                    <div class="well">
                        <h4>Operacje</h4>
                        {#<p><a class="btn btn-outline btn-lg btn-default btn-block"#}
                              {#href="{{ path('zwick_index') }}">Powrót do listy</a></p>#}
                        {#<p><a class="btn btn-outline btn-lg btn-success btn-block"#}
                              {#href="{{ path('lab1_pomiar_show', { 'id': lab1_pomiar.id }) }}">Przejdź do pomiaru</a></p>#}
                        {#{{ form_start(delete_form) }}#}
                        {#<input class="btn btn-outline btn-lg btn-danger btn-block" type="submit" value="Usuń Pomiar">#}
                        {#{{ form_end(delete_form) }}#}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <!-- Flot Charts JavaScript -->
    <script src="{{ asset('flot/excanvas.min.js') }}"></script>
    <script src="{{ asset('flot/jquery.flot.js') }}"></script>
    <script src="{{ asset('flot/jquery.flot.pie.js') }}"></script>
    <script src="{{ asset('flot/jquery.flot.resize.js') }}"></script>
    <script src="{{ asset('flot/jquery.flot.time.js') }}"></script>
    <script src="{{ asset('flot-tooltip/jquery.flot.tooltip.min.js') }}"></script>
    <script src="{{ asset('flot-axislabels/jquery.flot.axislabels.js') }}"></script>
    <script>
        $(document).ready(function() {
            var offset = 0;
            plot();

            function plot() {
                var p = [];
                {% for row in zwick_data %}
                p.push([{{ row.sexp }}, {{ row.eps }}])
                {% endfor %}

                var options = {
                    series: {
                        lines: {
                            show: true
                        },
                        points: {
                            show: true
                        }
                    },
                    grid: {
                        hoverable: true // this is needed for tooltip to work
                    },
                    tooltip: true,
                    tooltipOpts: {
                        content: "P(%x.3) =  %y.2",
                        shifts: {
                            x: -60,
                            y: 25
                        }
                    },
                    axisLabels: {
                        show: true
                    },
                    xaxes: [{
                        axisLabel: 'l [mm]',
                    }],
                    yaxes: [{
                        position: 'left',
                        axisLabel: 'P [kN]',
                    }]
                };

                var plotObj = $.plot($("#flot-line-chart"), [ {
                        data: p,
                        label: "P(l)"
                    }],
                    options);
            }
        });
    </script>
{% endblock %}