{% extends 'base.html.twig' %}
{% set counter = 0 %}

{% block body %}
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Statyczna próba rozciągania</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
        <div class="panel-heading">
            Wyniki obliczeń
        </div>
        <div class="panel-body">
    <div class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-body">
                <table>
                    <tbody >
                    <tr>
                        <th style="padding:5px">Id</th>
                        <td style="padding:5px">Id =  {{ lab1_wynik.id }}</td>
                    </tr>
                    <tr>
                        <th style="padding:5px">Powierzchnia początkowa: </th>
                        <td style="padding:5px">S<sub>0</sub> = {{ lab1_wynik.s0 }} mm<sup>2</sup></td>
                    </tr>
                    <tr>
                        <th style="padding:5px">Powierzchnia po zerwaniu: </th>
                        <td style="padding:5px">S<sub>u</sub> = {{ lab1_wynik.su }} mm<sup>2</sup></td>
                    </tr>
                    <tr>
                        <th style="padding:5px">Wydłużenie względne: </th>
                        <td style="padding:5px">A<sub>10</sub> = {{ lab1_wynik.a10 }} %</td>
                    </tr>
                    <tr>
                        <th style="padding:5px">Przewężenie względne: </th>
                        <td style="padding:5px">Z = {{ lab1_wynik.z }} %</td>
                    </tr>
                    {#<tr>#}
                        {#<th style="padding:5px">Granica proporcjonalności: </th>#}
                        {#<td style="padding:5px">R<sub>h</sub> = {{ lab1_wynik.rH }} kPa</td>#}
                    {#</tr>#}
                    <tr>
                        <th style="padding:5px">Dolna granica plastyczności: </th>
                        <td style="padding:5px">R<sub>eL</sub> = {{ lab1_wynik.reL }} kPa</td>
                    </tr>
                    <tr>
                        <th style="padding:5px">Górna granica plastyczności: </th>
                        <td style="padding:5px">R<sub>eH</sub> = {{ lab1_wynik.reH }} kPa</td>
                    </tr>
                    <tr>
                        <th style="padding:5px">Granica wytrzymałości: </th>
                        <td style="padding:5px">R<sub>m</sub> = {{ lab1_wynik.rm }} kPa</td>
                    </tr>
                    <tr>
                        <th style="padding:5px">Naprężenie przy zerwaniu: </th>
                        <td style="padding:5px">R<sub>u</sub> = {{ lab1_wynik.ru }} kPa</td>
                    </tr>
                    {#<tr>#}
                        {#<th style="padding:5px">Moduł sprężystości: </th>#}
                        {#<td style="padding:5px">E = {{ lab1_wynik.e }} kPa</td>#}
                    {#</tr>#}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>P</th>
                            <th>&Delta;l<sub>1</sub></th>
                            <th>&Delta;l<sub>2</sub></th>
                            <th>&Delta;l</th>
                            <th>&epsilon;</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th>[N]</th>
                            <th>[10<sup>-2</sup> mm]</th>
                            <th>[10<sup>-2</sup> mm]</th>
                            <th>[mm]</th>
                            <th>[mm]</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for lab1_wynik_tab in lab1_wynik_tabs %}
                            {% set counter = counter + 1 %}
                            <tr>
                                <td>{{ counter }}</td>
                                <td>{{ lab1_wynik_tab.p }}</td>
                                <td>{{ lab1_wynik_tab.dl1 }}</td>
                                <td>{{ lab1_wynik_tab.dl2 }}</td>
                                <td>{{ lab1_wynik_tab.dlsr }}</td>
                                <td>{{ lab1_wynik_tab.sdl }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
        </div>
        </div>
    </div>
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                Wykres zależności P = P(l) dla zmierzonych wartości
            </div>
            <div class="panel-body">
                <div class="flot-chart">
                    <div class="flot-chart-content" id="flot-line-chart"></div>
                </div>

                <div class="well">
                    <h4>Operacje</h4>
                    <p><a class="btn btn-outline btn-lg btn-default btn-block"
                          href="{{ path('lab1_wynik_index') }}">Powrót do listy</a></p>
                    <p><a class="btn btn-outline btn-lg btn-success btn-block"
                          href="{{ path('lab1_pomiar_show', { 'id': lab1_pomiar.id }) }}">Przejdź do pomiaru</a></p>
                        {#{{ form_start(delete_form) }}#}
                        {#<input class="btn btn-outline btn-lg btn-danger btn-block" type="submit" value="Usuń Pomiar">#}
                        {#{{ form_end(delete_form) }}#}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    <!-- Flot Charts JavaScript -->
    <script src="{{ asset('flot/excanvas.min.js') }}"></script>
    <script src="{{ asset('flot/jquery.flot.js') }}"></script>
    <script src="{{ asset('flot/jquery.flot.pie.js') }}"></script>
    <script src="{{ asset('flot/jquery.flot.resize.js') }}"></script>
    <script src="{{ asset('flot/jquery.flot.time.js') }}"></script>
    <script src="{{ asset('flot-tooltip/jquery.flot.tooltip.min.js') }}"></script>
    <script src="{{ asset('flot-axislabels/jquery.flot.axislabels.js') }}"></script>
    <script>
        $(document).ready(function() {
            var offset = 0;
            plot();

            function plot() {
                var p = [];
                {% for lab1_wynik_tab in lab1_wynik_tabs %}
                p.push([{{ lab1_wynik_tab.sdl }}, {{ lab1_wynik_tab.p }}])
                {% endfor %}

                var options = {
                    series: {
                        lines: {
                            show: true
                        },
                        points: {
                            show: true
                        }
                    },
                    grid: {
                        hoverable: true //IMPORTANT! this is needed for tooltip to work
                    },
                    tooltip: true,
                    tooltipOpts: {
                        content: "P(%x.3) =  %y.2",
                        shifts: {
                            x: -60,
                            y: 25
                        }
                    },
                    axisLabels: {
                        show: true
                    },
                    xaxes: [{
                        axisLabel: 'l [mm]',
                    }],
                    yaxes: [{
                        position: 'left',
                        axisLabel: 'P [kN]',
                    }]
                };

                var plotObj = $.plot($("#flot-line-chart"), [ {
                        data: p,
                        label: "P(l)"
                    }],
                    options);
            }
        });
    </script>
{% endblock %}